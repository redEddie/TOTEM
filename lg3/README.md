# ğŸš€ LG3 ì˜ˆì¸¡ íŒŒì´í”„ë¼ì¸ (LG3 Prediction Pipeline)

ì´ ì €ì¥ì†ŒëŠ” LG3 ë°ì´í„°ì˜ ì „ì²˜ë¦¬ë¶€í„° í† í°í™”, ìµœì¢… ì˜ˆì¸¡ ëª¨ë¸(Forecaster) í•™ìŠµê¹Œì§€ì˜ ì „ì²´ íŒŒì´í”„ë¼ì¸ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.

---

## ğŸ—ï¸ ì½”ë“œ êµ¬í˜„ ë° íŒŒì´í”„ë¼ì¸ ê°€ì´ë“œ

í”„ë¡œì íŠ¸ì˜ í•µì‹¬ ë¡œì§ì€ ë°ì´í„° ì •ì œ â†’ í† í¬ë‚˜ì´ì§• â†’ í•™ìŠµì˜ 5ë‹¨ê³„ ìŠ¤í…ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.

### 1. ë°ì´í„° ìœ„ì¹˜
í˜„ì¬ README.mdê°€ ìˆëŠ” ìœ„ì¹˜ì— dataí´ë”ë¥¼ ë§Œë“¤ê³  í•˜ìœ„ì— EREPORTì™€ SMARTCAREë¥¼ ë„£ìœ¼ë©´ ë©ë‹ˆë‹¤. (ì•„ì§ ì—¬ëŸ¬ì¢…ë¥˜ì˜ ë°ì´í„°ì„¸íŠ¸ëŠ” ê³ ë ¤ë˜ì§€ ì•ŠìŒ.)

### 1. ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ìˆœì„œ

ì¤‘ê°„ ì‚°ì¶œë¬¼(Artifacts)ì´ ì´ë¯¸ ì¡´ì¬í•œë‹¤ë©´ í•´ë‹¹ ë‹¨ê³„ëŠ” ê±´ë„ˆë›°ì–´ë„ ë¬´ë°©í•©ë‹ˆë‹¤.

| ë‹¨ê³„ | ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ | ì£¼ìš” ê¸°ëŠ¥ ë° ì—­í•  |
| --- | --- | --- |
| **Step 1** | `prepare_lg3_data.sh` | EREPORT + SMARTCARE ê¸°ë°˜ ìœ ë‹›ë³„ ë°ì´í„°ì…‹ ìƒì„± (15ë¶„ ë¦¬ìƒ˜í”Œë§ ë° ì‹œê°„ í•„í„° ì ìš©) |
| **Step 2** | `save_revin_data.sh` | RevIN ì ìš© ë° ê°œë³„ ìœ ë‹› ë°ì´í„°ë¥¼ í•™ìŠµìš© ìƒ˜í”Œ ë‹¨ìœ„ë¡œ ë³‘í•© |
| **Step 3** | `train_vqvae.sh` | ì‹œê³„ì—´ íŠ¹ì§• ì¶”ì¶œì„ ìœ„í•œ **VQ-VAE í† í¬ë‚˜ì´ì €** í•™ìŠµ |
| **Step 4** | `extract_forecasting_data.sh` | í•™ìŠµëœ í† í¬ë‚˜ì´ì €ë¥¼ ì´ìš©í•´ ì‹œê³„ì—´ì„ í† í° ì‹œí€€ìŠ¤ë¡œ ë³€í™˜ |
| **Step 5** | `train_forecaster.sh` | í† í°í™”ëœ ë°ì´í„°ë¥¼ ì‚¬ìš©í•´ ìµœì¢… **Forecaster** ëª¨ë¸ í•™ìŠµ |

### 2. ì£¼ìš” êµ¬í˜„ ë””í…Œì¼

* **ë°ì´í„° ì¡°ì¸:** EREPORTë¥¼ ë² ì´ìŠ¤ë¡œ í•˜ë©°, SMARTCARE ë°ì´í„°ëŠ” ìœ ë‹›ë³„ë¡œ ì¡°ì¸í•©ë‹ˆë‹¤. (`Auto Id`ëŠ” ê·¸ë£¹í•‘ ëª©ì ìœ¼ë¡œë§Œ í™œìš©)
* **ë°ì´í„° ë…¸ì´ì¦ˆ ì œê±°:** ë°˜ë³µì ì¸ íŒ¨í„´ìœ¼ë¡œ ì¸í•œ í† í° í¸í–¥ì„ ë§‰ê¸° ìœ„í•´ **00:00â€“06:00 ì‹œê°„ëŒ€ ë°ì´í„°ë¥¼ ì œì™¸**í–ˆìŠµë‹ˆë‹¤.
* **ë””ë²„ê¹… ì •ì±…:** CSV íŒŒì‹± ì´ìŠˆ ë°œìƒ ì‹œ `pdb`ê°€ ìë™ ì‹¤í–‰ë©ë‹ˆë‹¤. í„°ë¯¸ë„ì— `pdb` ì§„ì… ì‹œ `c`ë¥¼ ì…ë ¥í•˜ì—¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ê³„ì† ì§„í–‰í•˜ì‹­ì‹œì˜¤.
* **Comet ML:** í˜„ì¬ ë¡œê¹…ì€ ë¹„í™œì„±í™” ìƒíƒœì…ë‹ˆë‹¤. í˜‘ì—… ì‹œ API Keyë¥¼ ì„¤ì • íŒŒì¼ì— ì¶”ê°€í•˜ì—¬ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ§ª ë°ëª¨ ë° ì‹œê°í™” (`lg3/example/`)

ì½”ë“œì˜ ë™ì‘ ë°©ì‹ì„ ì§ê´€ì ìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆëŠ” ë…¸íŠ¸ë¶ íŒŒì¼ë“¤ì…ë‹ˆë‹¤.

* `lg3_prepare_lg3_data_demo.ipynb`: ë¦¬ìƒ˜í”Œë§ ë° ë°ì´í„° ë™ê¸°í™”/ë³‘í•© ê³¼ì • í™•ì¸
* `lg3_tokenizer_eval_demo.ipynb`: í† í¬ë‚˜ì´ì €ì˜ ì¬êµ¬ì„±(Reconstruction) í’ˆì§ˆ ë° í† í° íš¨ìœ¨ì„± ë¹„êµ
* `lg3_token_id_dominance_demo.ipynb`: íŠ¹ì • í† í°ì˜ ì§‘ì¤‘ í˜„ìƒ(Dominance) ì‹œê°í™”

---

## ğŸ”„ ë³€ê²½ì  ë° í–¥í›„ ê³„íš (Updates & TODO)

### âœ… ìµœê·¼ ë³€ê²½ ì‚¬í•­: ì‹œê°„ í•„í„°ë§ ì ìš©

1ì›” 13ì¼ íšŒì˜ ê²°ê³¼ì— ë”°ë¼, ì „ì²´ ë°ì´í„°ë¥¼ í† í°í™”í•  ê²½ìš° íŠ¹ì • í† í°ì— ê³¼ë„í•˜ê²Œ í¸í–¥ë˜ëŠ” ë¬¸ì œë¥¼ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ **ì‹¬ì•¼ ì‹œê°„ëŒ€(00-06ì‹œ)ë¥¼ ì œì™¸**í•˜ì—¬ í† í°ì˜ ë‹¤ì–‘ì„±ì„ í™•ë³´í–ˆìŠµë‹ˆë‹¤.

![alt text](image/codeusage1.png)
![alt text](image/codeusage2.png)
![alt text](image/codeusage3.png)

*> ìœ„ ì§€í‘œë¥¼ í†µí•´ í•„í„°ë§ í›„ í† í° ì‚¬ìš© ë¹ˆë„ê°€ ë” ê· ë“±í•´ì§„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.*

### ğŸ“ To-Do List

* [x] í¸í–¥ëœ ì‹œê³„ì—´ íŒ¨í„´ ì œì™¸ ë° í† í° ë¹ˆë„ ì¬ê²€ì¦
* [ ] **Forecaster** ëª¨ë¸ ìµœì í™” ë° í•™ìŠµ
* [ ] **Translator** ëª¨ë¸ ì„¤ê³„ ë° í•™ìŠµ
* [ ] ê³¼ê±° ìˆ˜ ì£¼ê°„ ë°ì´í„° í¬í•¨ ì‹œ ì˜ˆì¸¡ ì„±ëŠ¥ í–¥ìƒ ì—¬ë¶€ ê²€ì¦ (Ablation Study)

---

**Tip:** ì „ì²´ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¬í•™ìŠµì´ í•„ìš”í•œ ê²½ìš° `lg3/scripts/prepare_lg3_data.sh` ë‚´ì˜ í•„í„° ì˜µì…˜ì„ ìˆ˜ì •í•˜ì‹­ì‹œì˜¤.


ë‚´ ìƒê°ì—ëŠ” extract forecasting dataê°€ ì œëŒ€ë¡œ ê°œë°œë‹¨ê³„ë¥¼ ëª» ë”°ë¼ì˜¨ ê²ƒ ê°™ì•„. í™•ì¸í•´ë³´ë©´ csvê°€ ìˆì§€ë§Œ auto
  idë³„ë¡œ ë‚˜ë‰˜ì–´ì„œ í•˜ìœ„ í´ë”ì— ìˆì–´. ì´ë ‡ê²Œ ëœ ì´ìœ ëŠ” ë°ì´í„°ì„¸íŠ¸ë¥¼ ë§Œë“¤ ë•Œ ë‹¨ìˆœí•˜ê²Œ auto idë¥¼ ê°™ì€ ì‹œê°„ì—
  ìˆë‹¤ê³  11ê°œ concatnateì‹œí‚¤ë©´ ì‹œê³„ì—´ë°ì´í„°ê°€ ì‹œê°„ìˆœì„œë¥¼ ì§€í‚¤ì§€ ëª»í•˜ëŠ” ë¬¸ì œê°€ ìˆê¸° ë•Œë¬¸ì´ì§€. ê·¸ë˜ì„œ
  ë°ì´í„°ì„¸íŠ¸ë¥¼ ë§Œë“¤ ë•ŒëŠ” ì´ëŸ¬í•œ autoidë³„ csvë¥¼ ì´ìš©í•´ì„œ concatenateì‹œí‚¤ëŠ” ë°©ì‹ì„ ì´ìš©í•˜ëŠ” ë°©ë²•ë°–ì— ì—†ì–´.

   íŠ¸ëœìŠ¤í¬ë¨¸ ëª¨ë¸ í¬ê¸°: d_model=64, nlayers=4 (ë¹„êµì  ì‘ì€ ëª¨ë¸)
   >>    1 # ì•„ë˜ 4ì¤„ì„ train_forecaster.shì˜ ë§ˆì§€ë§‰ì— ì¶”ê°€
   2   --d-model 128 \
   3   --d_hid 512 \
   4   --nlayers 8 \
   5   --nhead 8